[gd_scene load_steps=23 format=3 uid="uid://hx5ecilneh8e"]

[ext_resource type="Script" uid="uid://v7nfrwkqo145" path="res://scripts/level.gd" id="1_iyy5h"]
[ext_resource type="PackedScene" uid="uid://b15jmf2bic5md" path="res://scenes/player_start_marker.tscn" id="2_mt0ue"]
[ext_resource type="Script" uid="uid://0rhyul8vxfsk" path="res://scenes/fit_collider.gd" id="3_0o3qa"]
[ext_resource type="Texture2D" uid="uid://l6lt46lorp3" path="res://assets/terrain_sets/candy/fill.png" id="3_b0jmv"]
[ext_resource type="Script" uid="uid://b16c1cdeyogbb" path="res://scripts/terrain_polygon.gd" id="4_1iikx"]
[ext_resource type="PackedScene" uid="uid://bldrg8lgu0dlc" path="res://scenes/void.tscn" id="4_wn0ph"]
[ext_resource type="PackedScene" uid="uid://bolndxsgq846l" path="res://scenes/crumbs_bag.tscn" id="5_5lpbr"]
[ext_resource type="Texture2D" uid="uid://bkt4xn0otwhob" path="res://assets/terrain_sets/candy/side.png" id="6_3l6ec"]
[ext_resource type="PackedScene" uid="uid://be4noytnjou3c" path="res://scenes/heart_pickup.tscn" id="6_b0jmv"]
[ext_resource type="PackedScene" uid="uid://bkd6kvsr43i6h" path="res://scenes/spikes.tscn" id="7_1iikx"]
[ext_resource type="PackedScene" uid="uid://c0msx5qed76ww" path="res://scenes/moving_spike.tscn" id="8_3l6ec"]
[ext_resource type="PackedScene" uid="uid://dmperxwoth085" path="res://scenes/warper.tscn" id="9_mt0ue"]
[ext_resource type="Texture2D" uid="uid://d1d3ufgfltkdu" path="res://assets/terrain_sets/candy/candy_bg_blur.png" id="10_0o3qa"]
[ext_resource type="PackedScene" uid="uid://dxjasd2h00akd" path="res://scenes/hazard_respawn_marker.tscn" id="15_3l6ec"]
[ext_resource type="PackedScene" uid="uid://d2uea123pdm8a" path="res://scenes/mist.tscn" id="16_m6j30"]
[ext_resource type="Texture2D" uid="uid://cdejfyj1amdb5" path="res://assets/particle_close.png" id="17_oubtt"]
[ext_resource type="Texture2D" uid="uid://bvhupw4fqj80i" path="res://assets/particle.png" id="18_xws3b"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_0o3qa"]
size = Vector2(176, 256)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_m6j30"]
size = Vector2(108, 494)

[sub_resource type="Gradient" id="Gradient_xws3b"]
offsets = PackedFloat32Array(0, 0.0577778, 0.964444, 0.991111)
colors = PackedColorArray(1, 1, 1, 0, 1, 1, 1, 0.615686, 1, 1, 1, 0.615686, 1, 1, 1, 0)

[sub_resource type="Gradient" id="Gradient_8k77x"]
colors = PackedColorArray(1, 1, 1, 0.780392, 1, 1, 1, 1)

[sub_resource type="Gradient" id="Gradient_8xssv"]
offsets = PackedFloat32Array(0, 0.0577778, 0.964444, 0.991111)
colors = PackedColorArray(1, 1, 1, 0, 1, 1, 1, 0.615686, 1, 1, 1, 0.615686, 1, 1, 1, 0)

[node name="3" type="Node" groups=["level"]]
script = ExtResource("1_iyy5h")
metadata/_custom_type_script = "uid://v7nfrwkqo145"

[node name="PlayerStartMarker" parent="." instance=ExtResource("2_mt0ue")]
position = Vector2(-96, -400)
facing_left = true

[node name="CameraExtents" type="Node2D" parent="." groups=["camera_extents"]]
position = Vector2(0, -320)

[node name="bottom_right" type="Marker2D" parent="CameraExtents"]
position = Vector2(448, 3104)

[node name="top_left" type="Marker2D" parent="CameraExtents"]
position = Vector2(-3232, -384)

[node name="BottomRight" type="Polygon2D" parent="."]
z_index = 100
position = Vector2(128, 528)
scale = Vector2(2.28, 2.36)
texture = ExtResource("3_b0jmv")
texture_offset = Vector2(80, 416)
texture_scale = Vector2(2.28, 2.28)
polygon = PackedVector2Array(-52.7719, -393.762, -333.474, -393.762, -333.474, -0.541946, -628.211, -0.541946, -565.053, 257.085, -551.018, 338.441, -593.123, 467.255, -614.175, 548.611, -565.053, 541.831, -438.737, 379.119, -312.421, 379.119, -312.421, 514.712, -459.79, 507.933, -536.982, 609.628, -593.123, 636.746, -593.123, 853.695, -333.474, 846.916, -52.7719, 853.695)
script = ExtResource("4_1iikx")

[node name="StaticBody2D" type="StaticBody2D" parent="BottomRight"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="BottomRight/StaticBody2D"]
visible = false
polygon = PackedVector2Array(-52.7719, -393.762, -333.474, -393.762, -333.474, -0.541946, -628.211, -0.541946, -565.053, 257.085, -551.018, 338.441, -593.123, 467.255, -614.175, 548.611, -565.053, 541.831, -438.737, 379.119, -312.421, 379.119, -312.421, 514.712, -459.79, 507.933, -536.982, 609.628, -593.123, 636.746, -593.123, 853.695, -333.474, 846.916, -52.7719, 853.695)

[node name="Sideline" type="Line2D" parent="BottomRight"]
z_index = 5
y_sort_enabled = true
points = PackedVector2Array(-52.7719, -393.762, -333.474, -393.762, -333.474, -0.541946, -628.211, -0.541946, -565.053, 257.085, -551.018, 338.441, -593.123, 467.255, -614.175, 548.611, -565.053, 541.831, -438.737, 379.119, -312.421, 379.119, -312.421, 514.712, -459.79, 507.933, -536.982, 609.628, -593.123, 636.746, -596.491, 867.797, -336.842, 861.017, -52.7719, 853.695)
closed = true
width = 46.0
texture = ExtResource("6_3l6ec")
texture_mode = 1

[node name="RightWall2" type="Polygon2D" parent="."]
z_index = 120
position = Vector2(120.32, 545.279)
scale = Vector2(2.28, 2.36)
texture = ExtResource("3_b0jmv")
texture_offset = Vector2(120.32, 33.279)
texture_scale = Vector2(2.28, 2.28)
polygon = PackedVector2Array(-59.7895, -373.423, -52.7719, -488.678, -165.053, -549.695, -347.509, -563.254, -789.614, -556.474, -1056.28, -515.796, -1266.81, -353.084, -1631.72, -481.898, -1659.79, -759.864, 66.5263, -773.423, 213.895, -671.728, 256, 189.289, -108.912, 182.509)
script = ExtResource("4_1iikx")
reversed = true

[node name="FitCollider" type="Node" parent="RightWall2"]
script = ExtResource("3_0o3qa")
metadata/_custom_type_script = "uid://0rhyul8vxfsk"

[node name="StaticBody2D" type="StaticBody2D" parent="RightWall2"]
collision_layer = 4
collision_mask = 66

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="RightWall2/StaticBody2D"]
visible = false
polygon = PackedVector2Array(-59.7895, -373.423, -52.7719, -488.678, -165.053, -549.695, -347.509, -563.254, -789.614, -556.474, -1056.28, -515.796, -1266.81, -353.084, -1631.72, -481.898, -1659.79, -759.864, 66.5263, -773.423, 213.895, -671.728, 256, 189.289, -108.912, 182.509)

[node name="Sideline" type="Line2D" parent="RightWall2"]
z_index = 100
points = PackedVector2Array(-108.912, 182.509, 256, 189.289, 213.895, -671.728, 66.5263, -773.423, -1659.79, -759.864, -1631.72, -481.898, -1266.81, -353.084, -1056.28, -515.796, -789.614, -556.474, -347.509, -563.254, -165.053, -549.695, -52.7719, -488.678, -59.7895, -373.423)
closed = true
width = 46.0
texture = ExtResource("6_3l6ec")
texture_mode = 1

[node name="LeftWall" type="Polygon2D" parent="."]
z_index = 120
position = Vector2(120.32, 545.279)
scale = Vector2(2.28, 2.36)
texture = ExtResource("3_b0jmv")
texture_offset = Vector2(120.32, 33.279)
texture_scale = Vector2(2.28, 2.28)
polygon = PackedVector2Array(-586.105, 690.984, -789.614, 690.984, -789.614, 311.322, -915.93, 311.322, -929.965, 196.068, -670.316, 162.17, -754.526, -68.3386, -579.088, -115.796, -572.07, -237.83, -628.211, -325.966, -635.228, -170.033, -782.596, -115.796, -1028.21, -115.796, -1154.53, -170.033, -1154.53, -325.966, -1715.93, -509.017, -1870.32, 887.594, -579.088, 853.695)
script = ExtResource("4_1iikx")

[node name="FitCollider" type="Node" parent="LeftWall"]
script = ExtResource("3_0o3qa")
metadata/_custom_type_script = "uid://0rhyul8vxfsk"

[node name="Sideline" type="Line2D" parent="LeftWall"]
z_index = 100
points = PackedVector2Array(-586.105, 690.984, -789.614, 690.984, -789.614, 311.322, -915.93, 311.322, -929.965, 196.068, -670.316, 162.17, -754.526, -68.3386, -579.088, -115.796, -572.07, -237.83, -628.211, -325.966, -635.228, -170.033, -782.596, -115.796, -1028.21, -115.796, -1154.53, -170.033, -1154.53, -325.966, -1715.93, -509.017, -1870.32, 887.594, -579.088, 853.695)
closed = true
width = 46.0
texture = ExtResource("6_3l6ec")
texture_mode = 1
sharp_limit = 10.0
round_precision = 18

[node name="StaticBody2D" type="StaticBody2D" parent="LeftWall"]
collision_layer = 4
collision_mask = 66

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="LeftWall/StaticBody2D"]
visible = false
polygon = PackedVector2Array(-586.105, 690.984, -789.614, 690.984, -789.614, 311.322, -915.93, 311.322, -929.965, 196.068, -670.316, 162.17, -754.526, -68.3386, -579.088, -115.796, -572.07, -237.83, -628.211, -325.966, -635.228, -170.033, -782.596, -115.796, -1028.21, -115.796, -1154.53, -170.033, -1154.53, -325.966, -1715.93, -509.017, -1870.32, 887.594, -579.088, 853.695)

[node name="Void" parent="." instance=ExtResource("4_wn0ph")]
position = Vector2(320, 3040)

[node name="CrumbsBag" parent="." instance=ExtResource("5_5lpbr")]
position = Vector2(-1936, 256)

[node name="CrumbsBag2" parent="." instance=ExtResource("5_5lpbr")]
position = Vector2(-2016, 256)

[node name="CrumbsBag3" parent="." instance=ExtResource("5_5lpbr")]
position = Vector2(-1856, 256)

[node name="HeartPickup" parent="." instance=ExtResource("6_b0jmv")]
position = Vector2(-1824, 1280)

[node name="Spikes" parent="." instance=ExtResource("7_1iikx")]
position = Vector2(-1632, 2192)

[node name="Spikes2" parent="." instance=ExtResource("7_1iikx")]
position = Vector2(-1536, 2192)

[node name="Spikes3" parent="." instance=ExtResource("7_1iikx")]
position = Vector2(-1456, 2192)

[node name="Spikes6" parent="." instance=ExtResource("7_1iikx")]
position = Vector2(-1247, 1807)
rotation = -2.51218
scale = Vector2(0.688706, 0.736727)

[node name="Spikes4" parent="." instance=ExtResource("7_1iikx")]
position = Vector2(-1376, 2192)

[node name="Spikes7" parent="." instance=ExtResource("7_1iikx")]
position = Vector2(-1200, 2080)
rotation = -0.851938
scale = Vector2(0.862512, 0.817702)

[node name="Spikes5" parent="." instance=ExtResource("7_1iikx")]
position = Vector2(-1280, 2176)
rotation = -0.549327

[node name="Spikes8" parent="." instance=ExtResource("7_1iikx")]
position = Vector2(-1216, 2144)
rotation = -0.816

[node name="MovingSpike" parent="." instance=ExtResource("8_3l6ec")]
position = Vector2(-1280, 608)
rotation = -1.90639
extended_time = 0.3
timer_offset = 0.0

[node name="MovingSpike2" parent="." instance=ExtResource("8_3l6ec")]
position = Vector2(-1251, 704)
rotation = -1.90639
extended_time = 0.3
timer_offset = 0.4

[node name="MovingSpike3" parent="." instance=ExtResource("8_3l6ec")]
position = Vector2(-1226, 814)
rotation = -1.90639
extended_time = 0.3
timer_offset = 0.8

[node name="Warper" parent="." instance=ExtResource("9_mt0ue")]
position = Vector2(-752, 1680)
destination = "res://scenes/levels/1/6_great_pit.tscn"

[node name="CollisionShape2D" type="CollisionShape2D" parent="Warper"]
position = Vector2(8, -40)
shape = SubResource("RectangleShape2D_0o3qa")

[node name="far_bg" type="CanvasLayer" parent="."]
layer = -30
follow_viewport_enabled = true
follow_viewport_scale = 0.7

[node name="Polygon2D" type="Polygon2D" parent="far_bg"]
texture_repeat = 2
position = Vector2(-2537.14, 1188.57)
color = Color(0.560742, 0.631237, 0.622418, 1)
texture = ExtResource("10_0o3qa")
texture_scale = Vector2(0.5, 0.5)
polygon = PackedVector2Array(-2788.57, -3954.29, 5714.29, -3885.71, 5645.71, 1782.86, -3177.14, 1622.86)

[node name="RespawnMarkers" type="Node2D" parent="."]

[node name="HazardRespawnMarker" parent="RespawnMarkers" instance=ExtResource("15_3l6ec")]
position = Vector2(-1248, 528)
facing_left = true

[node name="CollisionShape2D" type="CollisionShape2D" parent="RespawnMarkers/HazardRespawnMarker"]
position = Vector2(0, -237)
shape = SubResource("RectangleShape2D_m6j30")

[node name="CanvasModulate" type="CanvasModulate" parent="."]
color = Color(0.839952, 0.769118, 0.891034, 1)

[node name="Mist" parent="." instance=ExtResource("16_m6j30")]
position = Vector2(-624, 2128)

[node name="fg" type="CanvasLayer" parent="."]
layer = 0
follow_viewport_enabled = true
follow_viewport_scale = 1.3

[node name="CPUParticles2D2" type="CPUParticles2D" parent="fg"]
modulate = Color(1, 1, 1, 0.254902)
z_index = 1000
position = Vector2(-1107.69, 455.385)
amount = 20
texture = ExtResource("17_oubtt")
lifetime = 20.0
preprocess = 3.0
emission_shape = 3
emission_rect_extents = Vector2(1000, 1000)
spread = 180.0
gravity = Vector2(0, 0)
initial_velocity_min = 4.0
initial_velocity_max = 20.0
angular_velocity_min = 10.75
angular_velocity_max = 21.49
scale_amount_min = 0.1
scale_amount_max = 0.7
color_ramp = SubResource("Gradient_xws3b")
color_initial_ramp = SubResource("Gradient_8k77x")

[node name="CPUParticles2D" type="CPUParticles2D" parent="."]
z_as_relative = false
position = Vector2(-1424, 528)
amount = 100
texture = ExtResource("18_xws3b")
lifetime = 20.0
emission_shape = 3
emission_rect_extents = Vector2(1000, 1000)
spread = 180.0
gravity = Vector2(0, 0)
initial_velocity_min = 4.0
initial_velocity_max = 20.0
angular_velocity_min = 10.75
angular_velocity_max = 21.49
scale_amount_min = 0.01
scale_amount_max = 0.03
color_ramp = SubResource("Gradient_8xssv")
