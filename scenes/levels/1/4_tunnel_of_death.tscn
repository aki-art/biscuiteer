[gd_scene load_steps=22 format=3 uid="uid://d3rbyun4c77qv"]

[ext_resource type="Script" uid="uid://v7nfrwkqo145" path="res://scripts/level.gd" id="1_jst17"]
[ext_resource type="PackedScene" uid="uid://b15jmf2bic5md" path="res://scenes/player_start_marker.tscn" id="2_n1t7l"]
[ext_resource type="PackedScene" uid="uid://bkd6kvsr43i6h" path="res://scenes/spikes.tscn" id="4_pygfq"]
[ext_resource type="PackedScene" uid="uid://bldrg8lgu0dlc" path="res://scenes/void.tscn" id="5_kmkmt"]
[ext_resource type="Texture2D" uid="uid://l6lt46lorp3" path="res://assets/terrain_sets/candy/fill.png" id="6_603xc"]
[ext_resource type="Script" uid="uid://b16c1cdeyogbb" path="res://scripts/terrain_polygon.gd" id="7_rjvlg"]
[ext_resource type="Script" uid="uid://0rhyul8vxfsk" path="res://scenes/fit_collider.gd" id="8_o81d8"]
[ext_resource type="PackedScene" uid="uid://dmperxwoth085" path="res://scenes/warper.tscn" id="8_rjvlg"]
[ext_resource type="Texture2D" uid="uid://bkt4xn0otwhob" path="res://assets/terrain_sets/candy/side.png" id="9_16lv0"]
[ext_resource type="Texture2D" uid="uid://d1d3ufgfltkdu" path="res://assets/terrain_sets/candy/candy_bg_blur.png" id="9_n1t7l"]
[ext_resource type="PackedScene" uid="uid://dxjasd2h00akd" path="res://scenes/hazard_respawn_marker.tscn" id="13_30jdk"]
[ext_resource type="PackedScene" uid="uid://d2uea123pdm8a" path="res://scenes/mist.tscn" id="14_603xc"]
[ext_resource type="PackedScene" uid="uid://dtfi2bx1lva12" path="res://scenes/liquid.tscn" id="15_o81d8"]
[ext_resource type="Texture2D" uid="uid://cdejfyj1amdb5" path="res://assets/particle_close.png" id="15_rjvlg"]
[ext_resource type="Texture2D" uid="uid://bvhupw4fqj80i" path="res://assets/particle.png" id="16_o81d8"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_o81d8"]
size = Vector2(176, 256)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_jst17"]
size = Vector2(592, 20)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_603xc"]
size = Vector2(108, 494)

[sub_resource type="Gradient" id="Gradient_o81d8"]
offsets = PackedFloat32Array(0, 0.0577778, 0.964444, 0.991111)
colors = PackedColorArray(1, 1, 1, 0, 1, 1, 1, 0.615686, 1, 1, 1, 0.615686, 1, 1, 1, 0)

[sub_resource type="Gradient" id="Gradient_16lv0"]
colors = PackedColorArray(1, 1, 1, 0.780392, 1, 1, 1, 1)

[sub_resource type="Gradient" id="Gradient_t4rc1"]
offsets = PackedFloat32Array(0, 0.0577778, 0.964444, 0.991111)
colors = PackedColorArray(1, 1, 1, 0, 1, 1, 1, 0.615686, 1, 1, 1, 0.615686, 1, 1, 1, 0)

[node name="3" type="Node" groups=["level"]]
script = ExtResource("1_jst17")
metadata/_custom_type_script = "uid://v7nfrwkqo145"

[node name="PlayerStartMarker" parent="." instance=ExtResource("2_n1t7l")]
position = Vector2(-96, -400)
facing_left = true

[node name="CameraExtents" type="Node2D" parent="." groups=["camera_extents"]]
position = Vector2(0, -320)

[node name="bottom_right" type="Marker2D" parent="CameraExtents"]
position = Vector2(480, 3088)

[node name="top_left" type="Marker2D" parent="CameraExtents"]
position = Vector2(-4272, -1568)

[node name="BasinPolygon2" type="Polygon2D" parent="."]
z_index = 120
position = Vector2(120.32, 545.279)
texture = ExtResource("6_603xc")
texture_offset = Vector2(120.32, 33.279)
polygon = PackedVector2Array(488.23, -385.279, 488.23, -2225.28, -4364.26, -2241.28, -4463.63, -1137.28, -3238.09, -1153.28, -3055.91, -1297.28, -1300.4, -1233.28, -1217.59, -1265.28, -869.805, -1377.28, 206.686, -1393.28, 239.809, -1281.28, 256.371, -1121.28, 206.686, -945.279, -985.735, -945.279, -985.735, -1.27899, -2890.3, 1406.72, -3254.65, 1406.72, -3254.65, -913.279, -5368.32, -881.279, -4872.32, 2622.72, 504.792, 2462.72)
script = ExtResource("7_rjvlg")

[node name="FitCollider" type="Node" parent="BasinPolygon2"]
script = ExtResource("8_o81d8")
metadata/_custom_type_script = "uid://0rhyul8vxfsk"

[node name="StaticBody2D" type="StaticBody2D" parent="BasinPolygon2"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="BasinPolygon2/StaticBody2D"]
visible = false
polygon = PackedVector2Array(488.23, -385.279, 488.23, -2225.28, -4364.26, -2241.28, -4463.63, -1137.28, -3238.09, -1153.28, -3055.91, -1297.28, -1300.4, -1233.28, -1217.59, -1265.28, -869.805, -1377.28, 206.686, -1393.28, 239.809, -1281.28, 256.371, -1121.28, 206.686, -945.279, -985.735, -945.279, -985.735, -1.27899, -2890.3, 1406.72, -3254.65, 1406.72, -3254.65, -913.279, -5368.32, -881.279, -4872.32, 2622.72, 504.792, 2462.72)

[node name="Sideline" type="Line2D" parent="BasinPolygon2"]
z_index = 1
y_sort_enabled = true
points = PackedVector2Array(488.23, -385.279, 488.23, -2225.28, -4364.26, -2241.28, -4463.63, -1137.28, -3238.09, -1153.28, -3055.91, -1297.28, -1300.4, -1233.28, -1217.59, -1265.28, -869.805, -1377.28, 206.686, -1393.28, 239.809, -1281.28, 256.371, -1121.28, 206.686, -945.279, -985.735, -945.279, -985.735, -1.27899, -2890.3, 1406.72, -3254.65, 1406.72, -3254.65, -913.279, -5368.32, -881.279, -4872.32, 2622.72, 504.792, 2462.72)
closed = true
width = 64.0
texture = ExtResource("9_16lv0")
texture_mode = 1

[node name="Spikes" parent="." instance=ExtResource("4_pygfq")]
position = Vector2(-1296, -336)

[node name="Spikes2" parent="." instance=ExtResource("4_pygfq")]
position = Vector2(-1248, -288)
rotation = 0.794097

[node name="Spikes3" parent="." instance=ExtResource("4_pygfq")]
position = Vector2(-1232, -224)
rotation = 1.66294

[node name="Spikes4" parent="." instance=ExtResource("4_pygfq")]
position = Vector2(-1632, -336)

[node name="Spikes5" parent="." instance=ExtResource("4_pygfq")]
position = Vector2(-1728, -320)

[node name="Spikes6" parent="." instance=ExtResource("4_pygfq")]
position = Vector2(-1808, -320)

[node name="Spikes7" parent="." instance=ExtResource("4_pygfq")]
position = Vector2(-2032, -320)

[node name="Spikes8" parent="." instance=ExtResource("4_pygfq")]
position = Vector2(-2128, -320)

[node name="Spikes9" parent="." instance=ExtResource("4_pygfq")]
position = Vector2(-2224, -320)

[node name="Spikes10" parent="." instance=ExtResource("4_pygfq")]
position = Vector2(-2512, -320)

[node name="Spikes11" parent="." instance=ExtResource("4_pygfq")]
position = Vector2(-2608, -320)

[node name="Spikes12" parent="." instance=ExtResource("4_pygfq")]
position = Vector2(-2656, -288)
rotation = -1.12088

[node name="CeilingSpikes" type="Node2D" parent="."]
position = Vector2(0, 144)

[node name="Spikes13" parent="CeilingSpikes" instance=ExtResource("4_pygfq")]
position = Vector2(-2432, -880)
rotation = -3.14159

[node name="Spikes14" parent="CeilingSpikes" instance=ExtResource("4_pygfq")]
position = Vector2(-2336, -880)
rotation = -3.14159

[node name="Spikes15" parent="CeilingSpikes" instance=ExtResource("4_pygfq")]
position = Vector2(-2240, -880)
rotation = -3.14159

[node name="Spikes16" parent="CeilingSpikes" instance=ExtResource("4_pygfq")]
position = Vector2(-2144, -880)
rotation = -3.14159

[node name="Spikes17" parent="CeilingSpikes" instance=ExtResource("4_pygfq")]
position = Vector2(-2048, -880)
rotation = -3.14159

[node name="Spikes18" parent="CeilingSpikes" instance=ExtResource("4_pygfq")]
position = Vector2(-1952, -880)
rotation = -3.14159

[node name="Spikes19" parent="CeilingSpikes" instance=ExtResource("4_pygfq")]
position = Vector2(-1856, -880)
rotation = -3.14159

[node name="Spikes20" parent="CeilingSpikes" instance=ExtResource("4_pygfq")]
position = Vector2(-1760, -880)
rotation = -3.14159

[node name="Spikes21" parent="CeilingSpikes" instance=ExtResource("4_pygfq")]
position = Vector2(-1664, -880)
rotation = -3.14159

[node name="Spikes22" parent="CeilingSpikes" instance=ExtResource("4_pygfq")]
position = Vector2(-1568, -880)
rotation = -3.14159

[node name="Spikes23" parent="CeilingSpikes" instance=ExtResource("4_pygfq")]
position = Vector2(-1472, -880)
rotation = -3.14159

[node name="Spikes24" parent="CeilingSpikes" instance=ExtResource("4_pygfq")]
position = Vector2(-1376, -880)
rotation = -3.14159

[node name="Spikes25" parent="CeilingSpikes" instance=ExtResource("4_pygfq")]
position = Vector2(-1280, -880)
rotation = -3.14159

[node name="Spikes26" parent="CeilingSpikes" instance=ExtResource("4_pygfq")]
position = Vector2(-1184, -880)
rotation = -3.14159

[node name="Spikes27" parent="CeilingSpikes" instance=ExtResource("4_pygfq")]
position = Vector2(-1120, -896)
rotation = -3.61541

[node name="Spikes28" parent="CeilingSpikes" instance=ExtResource("4_pygfq")]
position = Vector2(-2720, -880)
rotation = -3.14159

[node name="Spikes29" parent="CeilingSpikes" instance=ExtResource("4_pygfq")]
position = Vector2(-2624, -880)
rotation = -3.14159

[node name="Spikes30" parent="CeilingSpikes" instance=ExtResource("4_pygfq")]
position = Vector2(-2528, -880)
rotation = -3.14159

[node name="Void" parent="." instance=ExtResource("5_kmkmt")]
position = Vector2(320, 3040)

[node name="IslandPolygon" type="Polygon2D" parent="."]
z_index = 120
texture = ExtResource("6_603xc")
polygon = PackedVector2Array(-2672, -256, -2656, -160, -2656, 912, -2384, 1136, -1296, 304, -1184, -96, -1264, -336, -2640, -336)
script = ExtResource("7_rjvlg")

[node name="FitCollider" type="Node" parent="IslandPolygon"]
script = ExtResource("8_o81d8")
metadata/_custom_type_script = "uid://0rhyul8vxfsk"

[node name="StaticBody2D" type="StaticBody2D" parent="IslandPolygon"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="IslandPolygon/StaticBody2D"]
polygon = PackedVector2Array(-2672, -256, -2656, -160, -2656, 912, -2384, 1136, -1296, 304, -1184, -96, -1264, -336, -2640, -336)

[node name="Sideline" type="Line2D" parent="IslandPolygon"]
z_index = 1
points = PackedVector2Array(-2672, -256, -2656, -160, -2656, 912, -2384, 1136, -1296, 304, -1184, -96, -1264, -336, -2640, -336)
closed = true
width = 64.0
texture = ExtResource("9_16lv0")
texture_mode = 1

[node name="Warper" parent="." groups=["warper"] instance=ExtResource("8_rjvlg")]
position = Vector2(-3520, -448)
destination = "res://scenes/levels/1/5_glass_bowl.tscn"

[node name="CollisionShape2D" type="CollisionShape2D" parent="Warper"]
position = Vector2(8, -40)
shape = SubResource("RectangleShape2D_o81d8")

[node name="Polygon2D" type="Polygon2D" parent="."]
color = Color(0.364414, 0.248535, 0.163091, 1)
polygon = PackedVector2Array(-3152, -224, -2656, -224, -2672, -192, -3152, -192)

[node name="StaticBody2D" type="StaticBody2D" parent="Polygon2D"]
position = Vector2(-2928, -208)
collision_layer = 4
collision_mask = 146

[node name="CollisionShape2D" type="CollisionShape2D" parent="Polygon2D/StaticBody2D"]
position = Vector2(16, -6)
shape = SubResource("RectangleShape2D_jst17")
one_way_collision = true

[node name="Polygon2D" type="Polygon2D" parent="Polygon2D"]
position = Vector2(2, 18)
rotation = 0.000423348
color = Color(1, 1, 1, 0.231373)
polygon = PackedVector2Array(-2923.07, -170.763, -2924.1, -233.762, -2942.1, -235.755, -2912.11, -263.767, -2893.1, -233.775, -2908.1, -235.769, -2913.07, -171.767)

[node name="far_bg" type="CanvasLayer" parent="."]
layer = -30
follow_viewport_enabled = true
follow_viewport_scale = 0.7

[node name="Polygon2D" type="Polygon2D" parent="far_bg"]
texture_repeat = 2
position = Vector2(-3382.86, 1357.14)
color = Color(0.560742, 0.631237, 0.622418, 1)
texture = ExtResource("9_n1t7l")
texture_scale = Vector2(0.5, 0.5)
polygon = PackedVector2Array(-2788.57, -3954.29, 5714.29, -3885.71, 5645.71, 1782.86, -3177.14, 1622.86)

[node name="EndCap" type="Polygon2D" parent="."]
z_index = 200
position = Vector2(-3824, -496)
texture = ExtResource("6_603xc")
texture_offset = Vector2(272, 16)
polygon = PackedVector2Array(-1056, -384, -960, 720, 112, 160, -32, -144)
script = ExtResource("7_rjvlg")

[node name="FitCollider" type="Node" parent="EndCap"]
script = ExtResource("8_o81d8")
metadata/_custom_type_script = "uid://0rhyul8vxfsk"

[node name="StaticBody2D" type="StaticBody2D" parent="EndCap"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="EndCap/StaticBody2D"]
visible = false
polygon = PackedVector2Array(-1056, -384, -960, 720, 112, 160, -32, -144)

[node name="Sideline" type="Line2D" parent="EndCap"]
z_index = 1
points = PackedVector2Array(-1056, -384, -960, 720, 112, 160, -32, -144)
closed = true
width = 64.0
texture = ExtResource("9_16lv0")
texture_mode = 1

[node name="RespawnMarkers" type="Node2D" parent="."]
position = Vector2(-1776, -336)

[node name="HazardRespawnMarker" parent="RespawnMarkers" instance=ExtResource("13_30jdk")]
position = Vector2(320, 0)

[node name="CollisionShape2D" type="CollisionShape2D" parent="RespawnMarkers/HazardRespawnMarker"]
position = Vector2(0, -237)
shape = SubResource("RectangleShape2D_603xc")

[node name="HazardRespawnMarker2" parent="RespawnMarkers" instance=ExtResource("13_30jdk")]
position = Vector2(-144, 0)
facing_left = true

[node name="CollisionShape2D" type="CollisionShape2D" parent="RespawnMarkers/HazardRespawnMarker2"]
position = Vector2(0, -237)
shape = SubResource("RectangleShape2D_603xc")

[node name="HazardRespawnMarker3" parent="RespawnMarkers" instance=ExtResource("13_30jdk")]
position = Vector2(-592, 0)
facing_left = true

[node name="CollisionShape2D" type="CollisionShape2D" parent="RespawnMarkers/HazardRespawnMarker3"]
position = Vector2(0, -237)
shape = SubResource("RectangleShape2D_603xc")

[node name="HazardRespawnMarker4" parent="RespawnMarkers" instance=ExtResource("13_30jdk")]
position = Vector2(1008, -64)
facing_left = true

[node name="CollisionShape2D" type="CollisionShape2D" parent="RespawnMarkers/HazardRespawnMarker4"]
position = Vector2(0, -237)
shape = SubResource("RectangleShape2D_603xc")

[node name="HazardRespawnMarker5" parent="RespawnMarkers" instance=ExtResource("13_30jdk")]
position = Vector2(-1456, -32)
facing_left = true

[node name="CollisionShape2D" type="CollisionShape2D" parent="RespawnMarkers/HazardRespawnMarker5"]
position = Vector2(0, -237)
shape = SubResource("RectangleShape2D_603xc")

[node name="CanvasModulate" type="CanvasModulate" parent="."]
color = Color(0.839952, 0.769118, 0.891034, 1)

[node name="Mist" parent="." instance=ExtResource("14_603xc")]
position = Vector2(-1840, 1264)

[node name="fg" type="CanvasLayer" parent="."]
layer = 0
follow_viewport_enabled = true
follow_viewport_scale = 1.3

[node name="CPUParticles2D2" type="CPUParticles2D" parent="fg"]
modulate = Color(1, 1, 1, 0.254902)
z_index = 1000
position = Vector2(-1600, 221.538)
amount = 20
texture = ExtResource("15_rjvlg")
lifetime = 20.0
preprocess = 3.0
emission_shape = 3
emission_rect_extents = Vector2(1000, 800)
spread = 180.0
gravity = Vector2(0, 0)
initial_velocity_min = 4.0
initial_velocity_max = 20.0
angular_velocity_min = 10.75
angular_velocity_max = 21.49
scale_amount_min = 0.1
scale_amount_max = 0.7
color_ramp = SubResource("Gradient_o81d8")
color_initial_ramp = SubResource("Gradient_16lv0")

[node name="CPUParticles2D" type="CPUParticles2D" parent="."]
z_as_relative = false
position = Vector2(-1616, 160)
amount = 100
texture = ExtResource("16_o81d8")
lifetime = 20.0
emission_shape = 3
emission_rect_extents = Vector2(1000, 1000)
spread = 180.0
gravity = Vector2(0, 0)
initial_velocity_min = 4.0
initial_velocity_max = 20.0
angular_velocity_min = 10.75
angular_velocity_max = 21.49
scale_amount_min = 0.01
scale_amount_max = 0.03
color_ramp = SubResource("Gradient_t4rc1")

[node name="Milk2" parent="." instance=ExtResource("15_o81d8")]
z_index = 1
position = Vector2(-3024, 1712)

[node name="MilkTop" parent="Milk2" index="3"]
z_index = 1
position = Vector2(-178, 71)
polygon = PackedVector2Array(-115, 4, 1053, 7, 1056, 61, -112.567, 57.0362)

[node name="Polygon2D" type="Polygon2D" parent="Milk2"]
polygon = PackedVector2Array(-292, 98, 1048, 99, 1036, 310, -331, 319)

[editable path="Milk2"]
