[gd_scene load_steps=16 format=3 uid="uid://cikny7p3hfbpt"]

[ext_resource type="Script" uid="uid://v7nfrwkqo145" path="res://scripts/level.gd" id="1_wsqcc"]
[ext_resource type="Script" uid="uid://0rhyul8vxfsk" path="res://scenes/fit_collider.gd" id="2_2kxbl"]
[ext_resource type="PackedScene" uid="uid://b15jmf2bic5md" path="res://scenes/player_start_marker.tscn" id="3_4otr4"]
[ext_resource type="Texture2D" uid="uid://bok33jquu8p71" path="res://assets/light.png" id="3_81wbg"]
[ext_resource type="PackedScene" uid="uid://bkd6kvsr43i6h" path="res://scenes/spikes.tscn" id="4_cdx7o"]
[ext_resource type="Texture2D" uid="uid://l6lt46lorp3" path="res://assets/terrain_sets/candy/fill.png" id="4_nswm5"]
[ext_resource type="PackedScene" uid="uid://c0msx5qed76ww" path="res://scenes/moving_spike.tscn" id="5_8vn8u"]
[ext_resource type="Texture2D" uid="uid://bkt4xn0otwhob" path="res://assets/terrain_sets/candy/side.png" id="5_nswm5"]
[ext_resource type="Texture2D" uid="uid://dk5clsoij3oc" path="res://assets/terrain_sets/candy/bottom.png" id="5_tvhpj"]
[ext_resource type="PackedScene" uid="uid://bolndxsgq846l" path="res://scenes/crumbs_bag.tscn" id="6_tvhpj"]
[ext_resource type="PackedScene" uid="uid://dmperxwoth085" path="res://scenes/warper.tscn" id="7_81wbg"]
[ext_resource type="Texture2D" uid="uid://d1d3ufgfltkdu" path="res://assets/terrain_sets/candy/candy_bg_blur.png" id="12_tvhpj"]

[sub_resource type="CanvasItemMaterial" id="CanvasItemMaterial_nswm5"]
blend_mode = 1

[sub_resource type="Curve" id="Curve_tvhpj"]
_data = [Vector2(0, 1), 0.0, 0.0, 0, 0, Vector2(0.142322, 1), -2.22777, -2.22777, 0, 0, Vector2(0.794008, 1), -0.866505, -0.0541565, 0, 0, Vector2(1, 0.512997), -5.14149, 0.0, 0, 0]
point_count = 4

[sub_resource type="RectangleShape2D" id="RectangleShape2D_8n4ih"]
size = Vector2(160, 256)

[node name="2" type="Node" groups=["level"]]
script = ExtResource("1_wsqcc")
metadata/_custom_type_script = "uid://v7nfrwkqo145"

[node name="LeftPlatform" type="Polygon2D" parent="."]
texture = ExtResource("4_nswm5")
polygon = PackedVector2Array(-1023, -9, 368, 0, 318.809, 311.545, 272, 608, -1688, 786)

[node name="StaticBody2D" type="StaticBody2D" parent="LeftPlatform"]
collision_layer = 4
collision_mask = 18

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="LeftPlatform/StaticBody2D"]
visible = false
polygon = PackedVector2Array(-544, 0, 368, 0, 318.809, 311.545, 272, 608, -560, 608)

[node name="LeftPlatform2" type="Polygon2D" parent="."]
texture = ExtResource("4_nswm5")
polygon = PackedVector2Array(-544, 0, 368, 0, 318.809, 311.545, 272, 608, -560, 608)

[node name="StaticBody2D" type="StaticBody2D" parent="LeftPlatform2"]
collision_layer = 4
collision_mask = 18

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="LeftPlatform2/StaticBody2D"]
visible = false
polygon = PackedVector2Array(-544, 0, 368, 0, 318.809, 311.545, 272, 608, -560, 608)

[node name="LeftPlatform3" type="Polygon2D" parent="."]
texture = ExtResource("4_nswm5")
polygon = PackedVector2Array(-547, 1, 368, 0, 318.809, 311.545, 272, 608, -560, 608)

[node name="StaticBody2D" type="StaticBody2D" parent="LeftPlatform3"]
collision_layer = 4
collision_mask = 18

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="LeftPlatform3/StaticBody2D"]
visible = false
polygon = PackedVector2Array(-544, 0, 368, 0, 318.809, 311.545, 272, 608, -560, 608)

[node name="Sideline" type="Line2D" parent="LeftPlatform3"]
position = Vector2(6, 262)
rotation = -0.44855
skew = 0.42586
points = PackedVector2Array(322.68, 230.993, 389.283, -78.2037, -451.552, -445.934)
width = 64.0
texture = ExtResource("5_nswm5")
texture_mode = 1

[node name="Light" type="Sprite2D" parent="."]
modulate = Color(0.679504, 0.811208, 0.957995, 1)
material = SubResource("CanvasItemMaterial_nswm5")
position = Vector2(1920, -1414)
rotation = -0.221277
scale = Vector2(8.71412, 4.20992)
texture = ExtResource("3_81wbg")

[node name="LeftCeiling" type="Polygon2D" parent="."]
texture_repeat = 2
texture = ExtResource("4_nswm5")
polygon = PackedVector2Array(-416, 0, -160, -192, 80, -304, 416, -432, 992, -496, 1488, -448, 1664, -640, 1696, -1040, 1408, -1040, 1453, -1221, 1463, -1313, 1544, -1345, 1728, -1400, 2049, -1444, 2188, -1353, 2357, -1407, 3561, -1162, 3589, -2001, -864, -1984, -1222, 1)

[node name="StaticBody2D" type="StaticBody2D" parent="LeftCeiling"]
collision_layer = 4
collision_mask = 18

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="LeftCeiling/StaticBody2D"]
visible = false
polygon = PackedVector2Array(-416, 0, -160, -192, 80, -304, 416, -432, 992, -496, 1488, -448, 1664, -640, 1696, -1040, 1408, -1040, 1536, -1296, 2352, -1296, 2656, -1296, 2656, -1984, -864, -1984, -864, 0)

[node name="Sideline" type="Line2D" parent="LeftCeiling"]
z_index = 100
position = Vector2(6, 262)
rotation = -0.44855
skew = 0.42586
points = PackedVector2Array(1687.48, -24.2152, 1712.53, -49.3592, 1758.26, -58.5295, 1782.01, -76.2342, 1816.89, -95.1136, 1836.35, -118.681, 1837.62, -169.143, 1856.8, -313.862, 1863.76, -369.859, 1883.14, -434.47, 1880.72, -470.529, 1866.5, -478.698, 1830.35, -497.381, 1749.01, -528.661, 1652.51, -574.524, 1571.37, -613.72, 1579.42, -669.24, 1599.76, -727.438, 1616.52, -776.181, 1630.66, -853.067, 1633.21, -865.967)
width = 64.0
texture = ExtResource("5_nswm5")
texture_mode = 1

[node name="Line2D2" type="Line2D" parent="LeftCeiling"]
position = Vector2(-12, 59)
points = PackedVector2Array(169, -389, 296, -365, 482, -441, 552, -453, 613, -454, 709, -465, 784, -470, 861, -478, 981, -481, 1064, -490, 1174, -484, 1273, -461, 1363, -493, 1462, -489, 1556, -515)
width = 256.0
texture = ExtResource("5_tvhpj")
texture_mode = 1

[node name="Line2D5" type="Line2D" parent="LeftCeiling"]
position = Vector2(-12, 59)
width = 256.0
texture = ExtResource("5_tvhpj")
texture_mode = 1

[node name="bottom" type="Line2D" parent="LeftCeiling"]
position = Vector2(1379, -966)
points = PackedVector2Array(42, -313, 165, -326, 331, -377, 567, -406, 767, -413)
width = 256.0
width_curve = SubResource("Curve_tvhpj")
texture = ExtResource("5_tvhpj")
texture_mode = 1

[node name="Line2D3" type="Line2D" parent="LeftCeiling"]
position = Vector2(6, 262)
rotation = -0.44855
skew = 0.42586
points = PackedVector2Array(-319.645, -483.742, -209, -488, -14, -482, 178, -478, 194, -469)
width = 256.0
texture = ExtResource("5_tvhpj")
texture_mode = 1

[node name="Sideline2" type="Line2D" parent="LeftCeiling"]
position = Vector2(6, 262)
rotation = -0.44855
skew = 0.42586
points = PackedVector2Array(-451.228, -458.797, -371.715, -487.323, -320.319, -501.039)
width = 64.0
texture = ExtResource("5_nswm5")
texture_mode = 1

[node name="RightWall" type="Polygon2D" parent="."]
position = Vector2(-320, -16)
texture = ExtResource("4_nswm5")
polygon = PackedVector2Array(2416, -1408, 2415, -487, 2454, -506, 2584, -526, 2679, -324, 2654, -292, 2544, -304, 2505, 20, 1622, 16, 1773, 644, 2954, 656, 2928, 80, 2864, -1408)

[node name="StaticBody2D" type="StaticBody2D" parent="RightWall"]
collision_layer = 4
collision_mask = 18

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="RightWall/StaticBody2D"]
visible = false
polygon = PackedVector2Array(2416, -1408, 2415, -487, 2582, -547, 2679, -324, 2654, -292, 2544, -304, 2496, 48, 2928, 80, 2864, -1408)

[node name="FitCollider" type="Node" parent="RightWall"]
script = ExtResource("2_2kxbl")
metadata/_custom_type_script = "uid://0rhyul8vxfsk"

[node name="bottom" type="Line2D" parent="RightWall"]
z_index = 1
position = Vector2(1382, -961)
points = PackedVector2Array(1034, 514, 1226, 481)
width = 256.0
width_curve = SubResource("Curve_tvhpj")
texture = ExtResource("5_tvhpj")
texture_mode = 1

[node name="Sideline3" type="Line2D" parent="RightWall"]
position = Vector2(454, 134)
rotation = -0.44855
skew = 0.42586
points = PackedVector2Array(2242.74, 842.801, 2219.01, 859.516, 1385.84, 496.108, 1288.23, 449.77, 1312.19, 556.185, 1380.59, 880.931)
width = 64.0
texture = ExtResource("5_nswm5")
texture_mode = 1
joint_mode = 2
round_precision = 4

[node name="Sideline" type="Line2D" parent="RightWall"]
position = Vector2(6, 262)
rotation = -0.44855
skew = 0.42586
points = PackedVector2Array(2686.91, -533.933, 2674.93, -146.031, 2675.83, 38.4088, 2653.96, 245.977, 2657.06, 387.357, 2678.16, 430.522)
width = 64.0
texture = ExtResource("5_nswm5")
texture_mode = 1

[node name="Sideline2" type="Line2D" parent="RightWall"]
position = Vector2(6, 262)
rotation = -0.44855
skew = 0.42586
points = PackedVector2Array(2873.7, 466.325, 2970.01, 740.163, 2835.03, 679.613, 2798.83, 662.909, 2788.72, 667.529, 2781.76, 679.513, 2736.17, 947.808)
width = 64.0
texture = ExtResource("5_nswm5")
texture_mode = 1

[node name="Polygon2D2" type="Polygon2D" parent="."]
position = Vector2(128, -144)
texture = ExtResource("4_nswm5")
polygon = PackedVector2Array(672, 96, 768, 96, 768, 192, 672, 192)

[node name="StaticBody2D" type="StaticBody2D" parent="Polygon2D2"]
collision_layer = 4
collision_mask = 18

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Polygon2D2/StaticBody2D"]
polygon = PackedVector2Array(672, 96, 768, 96, 768, 192, 672, 192)

[node name="RightPlatform" type="Polygon2D" parent="."]
visible = false
position = Vector2(240, -144)
color = Color(1, 0.11, 0.11, 0.447059)
texture = ExtResource("4_nswm5")
polygon = PackedVector2Array(1072, 144, 1184, 736, 2432, 752, 2416, 144)

[node name="StaticBody2D" type="StaticBody2D" parent="RightPlatform"]
collision_layer = 4
collision_mask = 18

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="RightPlatform/StaticBody2D"]
visible = false
polygon = PackedVector2Array(1072, 144, 1184, 736, 2432, 752, 2416, 144)

[node name="PitFloor" type="Polygon2D" parent="."]
position = Vector2(240, -144)
texture = ExtResource("4_nswm5")
polygon = PackedVector2Array(48, 448, 176, 560, 1008, 560, 1184, 464, 1232, 736, -96, 752)

[node name="StaticBody2D" type="StaticBody2D" parent="PitFloor"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="PitFloor/StaticBody2D"]
polygon = PackedVector2Array(48, 448, 176, 560, 1008, 560, 1184, 464, 1232, 736, -96, 752)

[node name="PlayerStartMarker" parent="." instance=ExtResource("3_4otr4")]
position = Vector2(1568, -1045)

[node name="Spikes2" parent="." instance=ExtResource("4_cdx7o")]
position = Vector2(816, 0)
rotation = -1.57079

[node name="Spikes" parent="." instance=ExtResource("4_cdx7o")]
position = Vector2(848, -32)

[node name="Spikes3" parent="." instance=ExtResource("4_cdx7o")]
position = Vector2(880, 0)
rotation = 1.57079

[node name="Spikes4" parent="." instance=ExtResource("4_cdx7o")]
position = Vector2(848, 32)
rotation = -3.14159

[node name="MovingSpike" parent="." instance=ExtResource("5_8vn8u")]
position = Vector2(1760, 0)

[node name="MovingSpike2" parent="." instance=ExtResource("5_8vn8u")]
position = Vector2(1856, 0)

[node name="MovingSpike3" parent="." instance=ExtResource("5_8vn8u")]
position = Vector2(1952, 0)

[node name="MovingSpike6" parent="." instance=ExtResource("5_8vn8u")]
position = Vector2(2048, 0)

[node name="MovingSpike4" parent="." instance=ExtResource("5_8vn8u")]
position = Vector2(2112, -976)
rotation = -1.57079
extended_time = 0.5
retracted_time = 1.0
timer_offset = 0.0

[node name="MovingSpike5" parent="." instance=ExtResource("5_8vn8u")]
position = Vector2(1664, -976)
rotation = 1.57079
extended_time = 0.5
retracted_time = 1.0
timer_offset = 0.0

[node name="Spikes5" parent="." instance=ExtResource("4_cdx7o")]
position = Vector2(560, 432)

[node name="Spikes6" parent="." instance=ExtResource("4_cdx7o")]
position = Vector2(640, 432)

[node name="Spikes7" parent="." instance=ExtResource("4_cdx7o")]
position = Vector2(736, 432)

[node name="Spikes8" parent="." instance=ExtResource("4_cdx7o")]
position = Vector2(816, 432)

[node name="Spikes9" parent="." instance=ExtResource("4_cdx7o")]
position = Vector2(464, 432)

[node name="Spikes10" parent="." instance=ExtResource("4_cdx7o")]
position = Vector2(384, 416)
rotation = 0.427816

[node name="Spikes11" parent="." instance=ExtResource("4_cdx7o")]
position = Vector2(320, 368)
rotation = 0.885159

[node name="Spikes12" parent="." instance=ExtResource("4_cdx7o")]
position = Vector2(896, 432)

[node name="Spikes13" parent="." instance=ExtResource("4_cdx7o")]
position = Vector2(976, 432)

[node name="Spikes14" parent="." instance=ExtResource("4_cdx7o")]
position = Vector2(1056, 432)

[node name="Spikes15" parent="." instance=ExtResource("4_cdx7o")]
position = Vector2(1120, 432)

[node name="Spikes16" parent="." instance=ExtResource("4_cdx7o")]
position = Vector2(1200, 432)

[node name="Spikes17" parent="." instance=ExtResource("4_cdx7o")]
position = Vector2(1280, 416)
rotation = -0.244659

[node name="Spikes18" parent="." instance=ExtResource("4_cdx7o")]
position = Vector2(1360, 384)
rotation = -0.485116

[node name="CrumbsBag" parent="." instance=ExtResource("6_tvhpj")]
position = Vector2(2272, -336)

[node name="CameraExtents" type="Node2D" parent="." groups=["camera_extents"]]
position = Vector2(0, -320)

[node name="bottom_right" type="Marker2D" parent="CameraExtents"]
position = Vector2(2688, 912)

[node name="top_left" type="Marker2D" parent="CameraExtents"]
position = Vector2(-656, -1072)

[node name="Warper" parent="." instance=ExtResource("7_81wbg")]
position = Vector2(-144, -80)
destination = "res://scenes/levels/1/3_we_got_milk.tscn"

[node name="CollisionShape2D" type="CollisionShape2D" parent="Warper"]
shape = SubResource("RectangleShape2D_8n4ih")

[node name="mid_bg2" type="CanvasLayer" parent="."]
layer = -2
follow_viewport_enabled = true
follow_viewport_scale = 0.9

[node name="Line2D3" type="Line2D" parent="mid_bg2"]
position = Vector2(-371.111, 277.778)
rotation = -0.0491796
scale = Vector2(1.2, 1.2)
points = PackedVector2Array(169, -389, 296, -365, 482, -441, 552, -453, 613, -454, 709, -465, 784, -470, 861, -478, 981, -481, 1064, -490, 1174, -484, 1273, -461, 1363, -493, 1462, -489, 1556, -515)
width = 256.0
texture = ExtResource("5_tvhpj")
texture_mode = 1

[node name="Light" type="Sprite2D" parent="mid_bg2"]
modulate = Color(0.740614, 0.789694, 0.963057, 0.411765)
position = Vector2(1781.18, -730.588)
scale = Vector2(7.54118, 6.08236)
texture = ExtResource("3_81wbg")

[node name="Light2" type="Sprite2D" parent="mid_bg2"]
modulate = Color(0.351909, 0.491478, 0.768971, 1)
material = SubResource("CanvasItemMaterial_nswm5")
position = Vector2(557, -443)
rotation = -0.221277
scale = Vector2(12.1414, 5.78552)
texture = ExtResource("3_81wbg")

[node name="mid_bg" type="CanvasLayer" parent="."]
layer = -5
follow_viewport_enabled = true
follow_viewport_scale = 0.85

[node name="back_wall" type="Node2D" parent="mid_bg"]
modulate = Color(0.89768, 0.7448, 0.98, 1)
position = Vector2(-156.471, -102.353)

[node name="Line2D2" type="Line2D" parent="mid_bg/back_wall"]
texture_repeat = 2
position = Vector2(1247.9, -670.504)
scale = Vector2(1.2, 1.2)
points = PackedVector2Array(169, -389, 296, -365, 482, -441, 552, -453, 613, -454, 709, -465, 784, -470, 861, -478, 981, -481, 1064, -490, 1174, -484, 1273, -461, 1363, -493, 1462, -489, 1556, -515)
width = 256.0
texture = ExtResource("5_tvhpj")
texture_mode = 1

[node name="Polygon2D" type="Polygon2D" parent="mid_bg/back_wall"]
position = Vector2(6, 262)
rotation = -0.44855
skew = 0.42586
texture = ExtResource("4_nswm5")
polygon = PackedVector2Array(594.327, -508.396, 644.706, -349.508, 697.416, 113.47, 534.027, 255.652, 383.11, 299.216, 379.32, 361.589, 370.763, 392.886, 2308.55, 1314.46, 2790.44, 1172.4, 2817.71, 442.038, 2655.31, 368.594, 2428.81, 196.327, 2213.24, 74.8123, 1890.26, -188.319, 1616.18, -498.256, 1357.3, -750.589)

[node name="Sideline" type="Line2D" parent="mid_bg/back_wall"]
position = Vector2(6, 262)
rotation = -0.44855
skew = 0.42586
points = PackedVector2Array(549.316, -571.932, 632.353, -431.886, 660.101, -299.818, 660.754, -193.508, 669.641, -61.62, 707.72, 100.935, 629.607, 206.088, 524.372, 242.461, 386.453, 298.666, 333.938, 400.919)
width = 128.0
texture = ExtResource("5_nswm5")
texture_mode = 1

[node name="Sideline2" type="Line2D" parent="mid_bg/back_wall"]
position = Vector2(6, 262)
rotation = -0.44855
skew = 0.42586
points = PackedVector2Array(2671.45, 388.599, 2476.59, 238.058, 2362.64, 179.629, 2267.44, 126.327, 2135.6, 29.1294, 1910.65, -160.472, 1841.68, -242.399, 1638.06, -441.752, 1561.64, -535.918, 1326.53, -762.933)
width = 128.0
texture = ExtResource("5_nswm5")
texture_mode = 1

[node name="Light" type="Sprite2D" parent="mid_bg"]
modulate = Color(0.740614, 0.789694, 0.963057, 0.411765)
position = Vector2(1781.18, -730.588)
scale = Vector2(7.54118, 6.08236)
texture = ExtResource("3_81wbg")

[node name="far_bg" type="CanvasLayer" parent="."]
layer = -10
follow_viewport_enabled = true
follow_viewport_scale = 0.7

[node name="Polygon2D" type="Polygon2D" parent="far_bg"]
texture_repeat = 2
position = Vector2(84.2857, 88.5714)
color = Color(0.560742, 0.631237, 0.622418, 1)
texture = ExtResource("12_tvhpj")
texture_scale = Vector2(0.5, 0.5)
polygon = PackedVector2Array(-2788.57, -3954.29, 5714.29, -3885.71, 5645.71, 1782.86, -3177.14, 1622.86)
